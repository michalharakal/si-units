# Releasing

This document describes the process of development, deploying and releasing a new version of the project.

From experience, the process of development, deployment and releasing a new version 
of the project can be made better manually.  

The table below lists the steps to be taken, corresponded terminal commands 
and quality criteria for completion of each step and moving to the next one.


| Step                                                    | Command                                                                                                                                                                                                                  | Quality Criteria                                                                                                                                                                                                        |
|---------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Clenup                                                  | ./gradlew clean                                                                                                                                                                                                          | No build directories in main project directory and sub-project directories.                                                                                                                                             |
| Sources generation                                      | ./gradlew :kotunil-generators:run                                                                                                                                                                                        | Generation without errors.                                                                                                                                                                                              |    
| Library development                                     | ./gradlew :kotunil:build                                                                                                                                                                                                 | Build without errors.                                                                                                                                                                                                   |                                                                                                                               |
| Publishing in mavenLocal                                | ./gradlew :kotunil:publishToMavenLocal                                                                                                                                                                                   | No errors. All expected libraries with corresponded creation time can be found in directory /Users/USER/.m2/repository/eu/sirotin/kotunil/kotunil-jvm/VERSION                                                           |
| Build and test java app with local version of library   | 1) Set in si-units\build.gradle.kts val kotunilJvmStableVersion = kotunilVersion. 2) Update gradle. 3) Set mavenLocal instead mavenGlobal in apps\java-console\build.gradle.kts. 4) ./gradlew :apps:jvm:java-console:run | Check table in output. Compare expectations and tests results.                                                                                                                                                          |
| Build and test kotlin app with local version of library | 1) Set mavenLocal instead mavenGlobal in apps\kotlin-console\build.gradle.kts. 2) ./gradlew :apps:jvm:kotlin-console:run                                                                                                 | Check table in output. Compare expectations and tests results.                                                                                                                                                          |
| Publishing JS part locally                              | 1) ./gradlew :js-lib:clean 2) ./gradlew :js-lib:build                                                                                                                                                                    | File js-lib\dist\package.json contains line "version": "<version>",                                                                                                                                                     |
| Test node_ts app with local version of library          | 1)./gradlew :apps:node_ts_app:clean 2)./gradlew :apps:node_ts_app:startConsole                                                                                                                                           | 1) Check that file apps/node_ts_app/node_modules/kotunil-js-lib/package.json uses right version. 2) Check output in terminal. Should be 3 lines: L1)Number checks=1078  L2)Number tested objects=61  L3)Number errors=0 |
| Test web_app_js app with local version of library       | 1)./gradlew :apps:web_app_js:clean 2)./gradlew :apps:web_app_js:build 3) In IDE select index.html ans start it (e.g. with popup-menu command "Open in..."                                                                | 1) Check that file apps/web_app_js/lib/package.json uses right version. 2) Check output in browser. Should be 3 lines: L1)Number checks=1078  L2)Number tested objects=61  L3)Number errors=0                           |
| Publishing in mavenCentral                              |                                                                                                                                                                                                                          |                                                                                                                                                                                                                         |
| Test JVM apps with mavenCentral version of library      |                                                                                                                                                                                                                          |                                                                                                                                                                                                                         |
| Publishing JS part in npm                               |                                                                                                                                                                                                                          |                                                                                                                                                                                                                         |
| Test JS apps with npm version of library                |                                                                                                                                                                                                                          |                                                                                                                                                                                                                         |
| Publishing documentation                                |                                                                                                                                                                                                                          |                                                                                                                                                                                                                         |
| Publishing in GitHub releases                           |                                                                                                                                                                                                                          |                                                                                                                                                                                                                         |
